import{a as g,t as h,c as lt,b as rt}from"../chunks/disclose-version.CM6f1PTD.js";import{p as nt,l as it,e as dt,a as ct,g as m,s as n,c as i,r as l,f as pt,t as N,b as f,d as W}from"../chunks/runtime.g0my00JR.js";import{s as q}from"../chunks/render.pmuW5QOO.js";import{i as C}from"../chunks/if.DVEvk735.js";import{e as vt,i as ut}from"../chunks/each.BeKM084r.js";import{a as B}from"../chunks/attributes.BVavg5V5.js";import{e as d}from"../chunks/utils.sCj8HAia.js";import{r as F}from"../chunks/misc.CY9ixZp3.js";import{i as bt}from"../chunks/lifecycle.6aQbxLMK.js";import{s as gt,a as mt}from"../chunks/store.6LPOOnpP.js";/* empty css                         */import{w as ft,g as K}from"../chunks/index.C34d6m6q.js";import{a as ht}from"../chunks/axios.CCb-kr4I.js";var xt=h('<span class="loading loading-spinner text-primary"></span>'),_t=h('<span class="text-blue-500 cursor-pointer underline" role="button" tabindex="0"> </span>'),yt=h('<tr class="border-b"><td class="px-6 py-4"><textarea class="w-full border border-gray-300 rounded px-2 py-1"></textarea></td><td class="px-6 py-4"><textarea class="w-full border border-gray-300 rounded px-2 py-1"></textarea></td><td class="px-6 py-4"><!></td><td class="px-6 py-4"><button class="btn btn-ghost btn-sm">Evaluate</button> <button class="btn btn-error btn-sm ml-2 svelte-u173a1">Delete</button></td></tr>'),wt=h('<div class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50"><div class="bg-white p-6 rounded-lg shadow-lg w-96"><h2 class="text-lg font-bold mb-4">AI Evaluation Statement</h2> <p class="mb-4"> </p> <button class="btn btn-primary w-full svelte-u173a1">Close</button></div></div>'),At=h('<div class="min-h-screen bg-base-300 p-8"><h1 class="text-2xl font-bold mb-4">Monitoring Page</h1> <button class="btn  bg-indigo-500 hover:bg-indigo-600 text-white font-medium mb-4">Add New Goal</button> <button class="btn bg-teal-500 hover:bg-teal-600 text-white font-medium mb-4">Evaluate All Goals with Gemini AI</button> <table class="table-auto w-full shadow-lg rounded-lg overflow-hidden"><thead><tr class="uppercase text-sm"><th class="px-6 py-3">Target</th><th class="px-6 py-3">Evaluation</th><th class="px-6 py-3">Achieved</th><th class="px-6 py-3">Actions</th></tr></thead><tbody></tbody></table> <!></div>');function zt(H,J){nt(J,!1);const O=gt(),Q=()=>mt(c,"$goals",O);let c=ft([]),x=W(!1),y=W("");const V="http://localhost:3000/evaluate-goal";async function M(e,t,o){try{let a=(await ht.post(V,{target:t,evaluation:o})).data.aiEvaluation;a=`${!["not achieved","unsuccessful","failed","incomplete","fell short","below target","did not meet","not","not been achieved"].some(p=>a.toLowerCase().includes(p))?"Yes: ":"No: "} ${a}`,c.update(p=>p.map(v=>v.id===e?{...v,achieved:a,isLoading:!1}:v)),f(y,a),f(x,!0)}catch(s){console.error("Error evaluating goal:",s),c.update(a=>a.map(r=>r.id===e?{...r,isLoading:!1}:r))}}async function X(){const e=K(c);for(const t of e)t.goal&&t.evaluation&&await M(t.id,t.goal,t.evaluation)}function P(e,t,o){c.update(s=>s.map(a=>a.id===e?{...a,[t]:o}:a))}const Y=()=>{c.update(e=>[...e,{id:Date.now(),goal:"",evaluation:"",achieved:null,isLoading:!1}])},Z=e=>{c.update(t=>t.filter(o=>o.id!==e))};function j(e){f(y,e),f(x,!0)}it(()=>K,()=>{K(c).length===0&&Y()}),dt(),bt();var w=At(),z=n(i(w),2),R=n(z,2),A=n(R,2),S=n(i(A));vt(S,5,Q,ut,(e,t)=>{let o=()=>m(t).id,s=()=>m(t).goal,a=()=>m(t).evaluation,r=()=>m(t).achieved,T=()=>m(t).isLoading;var p=yt(),v=i(p),k=i(v);F(k),l(v);var E=n(v),G=i(E);F(G),l(E);var L=n(E),tt=i(L);C(tt,T,u=>{var _=xt();g(u,_)},u=>{var _=lt(),et=pt(_);C(et,r,I=>{var b=_t(),ot=i(b,!0);N(()=>q(ot,r().startsWith("Yes")?"Achieved":"Not Achieved")),l(b),d("click",b,()=>j(r())),d("keydown",b,st=>st.key==="Enter"&&j(r())),g(I,b)},I=>{var b=rt("Pending");g(I,b)},!0),g(u,_)}),l(L);var U=n(L),D=i(U),at=n(D,2);l(U),l(p),N(()=>{B(k,s()),B(G,a()),D.disabled=!s()||!a()}),d("input",k,u=>P(o(),"goal",u.target.value)),d("input",G,u=>P(o(),"evaluation",u.target.value)),d("click",D,()=>M(o(),s(),a())),d("click",at,()=>Z(o())),g(e,p)}),l(S),l(A);var $=n(A,2);C($,()=>m(x),e=>{var t=wt(),o=i(t),s=n(i(o),2),a=i(s,!0);l(s);var r=n(s,2);l(o),l(t),N(()=>q(a,m(y))),d("click",r,()=>f(x,!1)),g(e,t)}),l(w),d("click",z,Y),d("click",R,X),g(H,w),ct()}export{zt as component};
