import{a as u,t as C,b as O}from"../chunks/disclose-version.CM6f1PTD.js";import{p as Y,a as Z,g as t,b as o,s as l,c as i,r as e,t as j,m as tt,d as f}from"../chunks/runtime.g0my00JR.js";import{s as z}from"../chunks/render.pmuW5QOO.js";import{i as w}from"../chunks/if.DVEvk735.js";import{e as at,i as st}from"../chunks/each.BeKM084r.js";import{r as et}from"../chunks/attributes.BVavg5V5.js";import{s as B}from"../chunks/class.tYA33czU.js";import{e as h}from"../chunks/utils.sCj8HAia.js";import{b as it}from"../chunks/input.N22HgeA5.js";import{i as ot}from"../chunks/lifecycle.6aQbxLMK.js";import{o as rt}from"../chunks/index-client.v1G0sw0w.js";/* empty css                         */import{s as y}from"../chunks/supabaseClient.CaMOPPuz.js";var lt=C("<div><span> </span></div>"),nt=C('<tr class="hover border border-gray-700"><td class="px-6 py-4"> </td><td class="px-6 py-4 flex gap-4"><button class="btn btn-sm bg-blue-600 hover:bg-blue-700 font-medium">Edit</button> <button><!></button></td></tr>'),ct=C('<div class="modal modal-open"><div class="modal-box bg-base-200"><h2 class="font-bold text-xl mb-4"> </h2> <label for="classification-name" class="block mb-2 text-white">Classification Name</label> <input id="classification-name" type="text" class="input input-bordered w-full mb-4"> <div class="modal-action"><button><!></button> <button class="btn btn-accent">Cancel</button></div></div></div>'),dt=C('<div class="min-h-screen  p-8"><h1 class="text-3xl font-bold mb-6">Classifications</h1> <!> <div class="overflow-x-auto shadow-lg rounded-lg"><table class="table w-full"><thead><tr class="border"><th class="px-6 py-4">Classification Name</th><th class="px-6 py-4">Actions</th></tr></thead><tbody></tbody></table></div> <div class="mt-6"><button class="btn bg-indigo-600 hover:bg-indigo-700 text-white font-medium">Add Classification</button></div> <!></div>');function kt(P,Q){Y(Q,!1);let F=f([]),n=f({id:null,name:""}),k=f(!1),E=f(!1),G=f(""),H=f("success"),A=f(!1),v=f(!1),p=f(!1);const x=async()=>{const{data:s,error:a}=await y.from("classification").select("id, name");a?m("Error fetching classifications.","error"):o(F,s||[])},m=(s,a="success")=>{o(G,s),o(H,a),o(A,!0),setTimeout(()=>o(A,!1),3e3)},I=(s={id:null,name:""})=>{o(n,{...s}),o(E,s.id!==null),o(k,!0)},D=()=>{o(k,!1),o(n,{id:null,name:""})},R=async()=>{if(o(v,!0),t(E)&&t(n).id!==null){const{error:s}=await y.from("classification").update({name:t(n).name}).eq("id",t(n).id);s?m("Error updating classification.","error"):(m("Classification updated successfully."),await x(),D())}else{const{error:s}=await y.from("classification").insert({name:t(n).name});s?m("Error adding classification.","error"):(m("Classification added successfully."),await x(),D())}o(v,!1)},U=async s=>{o(p,!0);const{error:a}=await y.from("classification").delete().eq("id",s);a?m("Error deleting classification.","error"):(m("Classification deleted successfully."),await x()),o(p,!1)};rt(async()=>{await x()}),ot();var M=dt(),J=l(i(M),2);w(J,()=>t(A),s=>{var a=lt(),c=i(a),d=i(c,!0);e(c),e(a),j(()=>{B(a,`alert ${t(H)==="success"?"alert-success":"alert-error"} shadow-lg mb-6`),z(d,t(G))}),u(s,a)});var $=l(J,2),K=i($),L=l(i(K));at(L,5,()=>t(F),st,(s,a)=>{var c=nt(),d=i(c),N=i(d,!0);e(d);var b=l(d),g=i(b),r=l(g,2),S=i(r);w(S,()=>!t(p),T=>{var _=O("Delete");u(T,_)}),e(r),e(b),e(c),j(()=>{z(N,t(a).name),B(r,`btn btn-sm bg-red-600 hover:bg-red-700 font-medium ${(t(p)?"loading":"")??""}`),r.disabled=t(p)}),h("click",g,()=>I(t(a))),h("click",r,()=>t(a).id!==null&&U(t(a).id)),u(s,c)}),e(L),e(K),e($);var q=l($,2),V=i(q);e(q);var W=l(q,2);w(W,()=>t(k),s=>{var a=ct(),c=i(a),d=i(c),N=i(d,!0);e(d);var b=l(d,4);et(b);var g=l(b,2),r=i(g),S=i(r);w(S,()=>!t(v),_=>{var X=O("Save");u(_,X)}),e(r);var T=l(r,2);e(g),e(c),e(a),j(()=>{z(N,t(E)?"Edit Classification":"Add Classification"),B(r,`btn btn-success ${(t(v)?"loading":"")??""}`),r.disabled=t(v)}),it(b,()=>t(n).name,_=>tt(n,t(n).name=_)),h("click",r,R),h("click",T,D),u(s,a)}),e(M),h("click",V,()=>I()),u(P,M),Z()}export{kt as component};
