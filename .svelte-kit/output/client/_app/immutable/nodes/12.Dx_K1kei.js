import{a as _,t as f,c as et}from"../chunks/disclose-version.CM6f1PTD.js";import{p as rt,t as b,a as ot,g as t,c as r,f as st,b as p,s,r as e,d as x,i as it}from"../chunks/runtime.g0my00JR.js";import{s as d}from"../chunks/render.pmuW5QOO.js";import{i as j}from"../chunks/if.DVEvk735.js";import{e as z,i as K}from"../chunks/each.BeKM084r.js";import{e as T}from"../chunks/utils.sCj8HAia.js";import{b as lt}from"../chunks/select.BRIlu2rr.js";import{i as nt}from"../chunks/lifecycle.6aQbxLMK.js";import{o as dt}from"../chunks/index-client.v1G0sw0w.js";import{s as B}from"../chunks/supabaseClient.CaMOPPuz.js";import{g as vt}from"../chunks/entry.CFewmVp1.js";var ct=f('<span class="loading loading-spinner text-primary">Loading...</span>'),_t=f("<option> </option>"),pt=f('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td><button class="btn btn-primary">Add Action Plans</button></td></tr>'),mt=f('<div class="mt-8"><h2 class="text-xl font-bold mb-4"> </h2> <p class="mb-4"> </p> <table class="table table-zebra w-full"><thead><tr><th>Objective</th><th>Strategic Initiatives</th><th>KPI</th><th>Persons Involved</th><th>Target</th><th>Evaluation Measures</th><th>Action</th></tr></thead><tbody></tbody></table></div>'),ft=f('<div class="mt-4"><p>No objectives found for this goal.</p></div>'),ut=f('<div class="container mx-auto p-4"><h1 class="text-3xl font-bold">Operational Plans</h1> <!> <div class="my-4"><label class="block">Select a Strategic Goal:</label> <select class="select select-bordered w-full"><option disabled selected>Select a goal</option><!></select></div> <!></div>');function kt(C,D){rt(D,!1);let u=x([]),n=x(null),y=x([]),g=x(!1);const F=async()=>{p(g,!0);const{data:o,error:a}=await B.from("strategic_goals").select("id, name, goal_no");a?console.error("Error fetching strategic goals:",a):p(u,o),p(g,!1)},H=async()=>{if(t(n)===null)return;p(g,!0);const{data:o,error:a}=await B.from("strategic_objectives").select("*").eq("strategic_goal_id",t(n));a?console.error("Error fetching strategic objectives:",a):p(y,o),p(g,!1)};dt(()=>{F()});const J=o=>{vt(`/plans/operationalPlans/${o}`)};nt();var S=ut(),L=s(r(S),2);j(L,()=>t(g),o=>{var a=ct();_(o,a)});var w=s(L,2),h=s(r(w),2);b(()=>{t(n),it(()=>{t(u)})});var G=r(h);G.value=((G.__value="")==null,"");var Q=s(G);z(Q,1,()=>t(u),K,(o,a)=>{var i=_t(),m={},v=r(i);e(i),b(()=>{m!==(m=t(a).id)&&(i.value=(i.__value=t(a).id)==null?"":t(a).id),d(v,`${t(a).goal_no??""} - ${t(a).name??""}`)}),_(o,i)}),e(h),e(w);var R=s(w,2);j(R,()=>t(n)&&t(y).length>0,o=>{var a=mt(),i=r(a),m=r(i);b(()=>{var c;return d(m,`Strategic Objectives for Goal No ${((c=t(u).find(l=>l.id===t(n)))==null?void 0:c.goal_no)??""}`)}),e(i);var v=s(i,2),U=r(v);b(()=>{var c;return d(U,`Strategic Goal: ${((c=t(u).find(l=>l.id===t(n)))==null?void 0:c.name)??""}`)}),e(v);var M=s(v,2),N=s(r(M));z(N,5,()=>t(y),K,(c,l)=>{var O=pt(),P=r(O),V=r(P,!0);e(P);var $=s(P),W=r($,!0);e($);var k=s($),X=r(k,!0);e(k);var I=s(k),Y=r(I,!0);e(I);var A=s(I),Z=r(A,!0);e(A);var E=s(A),tt=r(E,!0);e(E);var q=s(E),at=r(q);e(q),e(O),b(()=>{d(V,t(l).name),d(W,t(l).strategic_initiatives),d(X,t(l).kpi),d(Y,t(l).persons_involved),d(Z,t(l).target),d(tt,t(l).eval_measures)}),T("click",at,()=>J(t(l).id)),_(c,O)}),e(N),e(M),e(a),_(o,a)},o=>{var a=et(),i=st(a);j(i,()=>t(n),m=>{var v=ft();_(m,v)},null,!0),_(o,a)}),e(S),lt(h,()=>t(n),o=>p(n,o)),T("change",h,H),_(C,S),ot()}export{kt as component};
