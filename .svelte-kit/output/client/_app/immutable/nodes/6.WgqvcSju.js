import{a as d,t as n,c as X,b as Y}from"../chunks/disclose-version.CM6f1PTD.js";import{p as Z,a as $,g as t,f as aa,b as e,s as l,c as r,r as o,t as k,m as ea,d as u}from"../chunks/runtime.g0my00JR.js";import{s as D}from"../chunks/render.pmuW5QOO.js";import{i as y}from"../chunks/if.DVEvk735.js";import{e as ta,i as sa}from"../chunks/each.BeKM084r.js";import{r as oa}from"../chunks/attributes.BVavg5V5.js";import{e as F}from"../chunks/utils.sCj8HAia.js";import{b as ra}from"../chunks/input.N22HgeA5.js";import{i as la}from"../chunks/lifecycle.6aQbxLMK.js";import{o as da}from"../chunks/index-client.v1G0sw0w.js";import{s as S}from"../chunks/supabaseClient.CaMOPPuz.js";var ia=n('<div class="alert alert-success shadow-lg mb-4"> </div>'),na=n('<div class="alert alert-error shadow-lg mb-4"> </div>'),va=n('<button class="btn loading">Loading...</button>'),ca=n("<div>No leads found.</div>"),ba=n('<tr class="hover:bg-gray-700"><td class="px-6 py-4"> </td><td class="px-6 py-4 flex gap-2"><button class="btn btn-sm bg-blue-600 hover:bg-blue-700 text-white font-medium">Edit</button> <button class="btn btn-sm bg-red-600 hover:bg-red-700 text-white font-medium">Delete</button></td></tr>'),ua=n('<div class="overflow-x-auto rounded-lg shadow-lg"><table class="table w-full bg-base-100 text-left"><thead><tr class="bg-gray-800 "><th class="px-6 py-3">Name</th><th class="px-6 py-3">Actions</th></tr></thead><tbody></tbody></table></div>'),ma=n('<span class="loading loading-spinner">Saving...</span>'),fa=n('<div class="modal modal-open"><div class="modal-box bg-base-200"><h3 class="font-bold text-lg"> </h3> <div class="py-4"><label for="lead-name" class="label text-white">Name</label> <input id="lead-name" type="text" class="input input-bordered w-full"></div> <div class="modal-action"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-success"><!></button></div></div></div>'),pa=n('<div class="container mx-auto px-6"><h2 class="text-2xl  font-bold mb-6">Leads</h2> <button class="mt-4 mb-4  btn bg-indigo-600 hover:bg-indigo-700 text-white">Add Lead</button> <!> <!> <!> <!></div>');function Na(K,O){Z(O,!1);let q=u([]),C=u(!1),h=u(!1),v=u(null),N=u(null),A=u(!1),m=u(!1),i=u({id:0,name:""});const U=async()=>{e(C,!0);const{data:s,error:a}=await S.from("leads").select("*");a?(console.error("Error fetching leads:",a),e(v,"Failed to fetch leads.")):(e(q,s),e(v,null)),e(C,!1)},P=async()=>{e(h,!0);const{data:s,error:a}=t(m)?await S.from("leads").update({name:t(i).name}).eq("id",t(i).id):await S.from("leads").insert([{name:t(i).name}]);a?(console.error("Error saving lead:",a),e(v,"Failed to save lead.")):(e(N,t(m)?"Lead updated successfully!":"Lead added successfully!"),e(v,null),await U(),z()),e(h,!1)},Q=async s=>{e(h,!0);const{error:a}=await S.from("leads").delete().eq("id",s);a?(console.error("Error deleting lead:",a),e(v,"Failed to delete lead.")):(e(N,"Lead deleted successfully!"),e(v,null),await U()),e(h,!1)},R=()=>{e(i,{id:0,name:""}),e(m,!1),e(A,!0)},T=s=>{e(i,{...s}),e(m,!0),e(A,!0)},z=()=>{e(i,{id:0,name:""}),e(m,!1),e(A,!1)};da(()=>{U()}),la();var j=pa(),B=l(r(j),2),G=l(B,2);y(G,()=>t(N),s=>{var a=ia(),c=r(a,!0);o(a),k(()=>D(c,t(N))),d(s,a)});var H=l(G,2);y(H,()=>t(v),s=>{var a=na(),c=r(a,!0);o(a),k(()=>D(c,t(v))),d(s,a)});var I=l(H,2);y(I,()=>t(C),s=>{var a=va();d(s,a)},s=>{var a=X(),c=aa(a);y(c,()=>t(q).length===0,f=>{var p=ca();d(f,p)},f=>{var p=ua(),x=r(p),L=l(r(x));ta(L,5,()=>t(q),sa,(M,w)=>{var b=ba(),E=r(b),g=r(E,!0);o(E);var _=l(E),J=r(_),W=l(J,2);o(_),o(b),k(()=>D(g,t(w).name)),F("click",J,()=>T(t(w))),F("click",W,()=>Q(t(w).id)),d(M,b)}),o(L),o(x),o(p),d(f,p)},!0),d(s,a)});var V=l(I,2);y(V,()=>t(A),s=>{var a=fa(),c=r(a),f=r(c),p=r(f,!0);o(f);var x=l(f,2),L=l(r(x),2);oa(L),o(x);var M=l(x,2),w=r(M),b=l(w,2),E=r(b);y(E,()=>t(h),g=>{var _=ma();d(g,_)},g=>{var _=Y();k(()=>D(_,t(m)?"Update":"Save")),d(g,_)}),o(b),o(M),o(c),o(a),k(()=>{D(p,t(m)?"Edit Lead":"Add Lead"),b.disabled=t(h)}),ra(L,()=>t(i).name,g=>ea(i,t(i).name=g)),F("click",w,z),F("click",b,P),d(s,a)}),o(j),F("click",B,R),d(K,j),$()}export{Na as component};
